{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}KitchenCrate{% endblock %}</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Mobile CSS -->
    <link rel="stylesheet" href="{% static 'css/mobile.css' %}">
    <!-- Custom CSS -->
    <style>
        :root {
            --primary-color: #8B5A3C;
            --secondary-color: #D4AF37;
            --accent-color: #F5E6D3;
            --text-dark: #2C1810;
            --text-light: #6B4E3D;
            --white: #FFFFFF;
            --light-bg: #FDFBF8;
            --border-color: #E8DCC8;
            --success-color: #28A745;
            --danger-color: #DC3545;
            --warning-color: #FFC107;
            --info-color: #17A2B8;
        }

        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light-bg);
            color: var(--text-dark);
            line-height: 1.6;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
        }

        /* Navbar Styling */
        .navbar {
            background: var(--white) !important;
            box-shadow: 0 2px 20px rgba(139, 90, 60, 0.1);
            padding: 1rem 0;
        }

        .navbar-brand {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            font-size: 2rem;
            color: var(--primary-color) !important;
            text-decoration: none;
        }

        .navbar-brand:hover {
            color: var(--secondary-color) !important;
        }

        .nav-link {
            font-weight: 500;
            color: var(--text-dark) !important;
            margin: 0 0.5rem;
            padding: 0.5rem 1rem !important;
            border-radius: 25px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            color: var(--primary-color) !important;
            background-color: var(--accent-color);
            transform: translateY(-2px);
        }

        .navbar-nav .nav-link.active {
            background-color: var(--primary-color);
            color: var(--white) !important;
        }

        /* Cart Badge */
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--secondary-color);
            color: var(--white);
            border-radius: 50%;
            padding: 4px 8px;
            font-size: 0.75rem;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(212, 175, 55, 0.3);
        }

        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, var(--accent-color) 0%, var(--white) 100%);
            padding: 4rem 0;
            margin-bottom: 3rem;
        }

        .hero-title {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 2rem;
        }

        /* Card Styling */
        .card {
            border: none;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(139, 90, 60, 0.08);
            transition: all 0.4s ease;
            overflow: hidden;
            background: var(--white);
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(139, 90, 60, 0.15);
        }

        .card-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--white);
            border: none;
            padding: 1.5rem;
            font-family: 'Playfair Display', serif;
            font-weight: 600;
        }

        .card-body {
            padding: 2rem;
        }

        .card-img-top {
            height: 280px;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        /* Product Cards */
        .product-card {
            border-radius: 20px;
            overflow: hidden;
            background: var(--white);
        }

        .product-card:hover .card-img-top {
            transform: scale(1.08);
        }

        .product-card .card-body {
            padding: 1.5rem;
        }

        .product-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .product-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .product-category {
            color: var(--text-light);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Button Styling */
        .btn {
            border-radius: 30px;
            font-weight: 600;
            padding: 12px 30px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(139, 90, 60, 0.2);
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border: none;
            color: var(--white);
        }

        .btn-primary:hover {
            background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
            color: var(--white);
        }

        .btn-success {
            background: linear-gradient(45deg, var(--success-color), #20C997);
            border: none;
            color: var(--white);
        }

        .btn-outline-primary {
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            background: transparent;
        }

        .btn-outline-primary:hover {
            background: var(--primary-color);
            color: var(--white);
        }

        .btn-lg {
            padding: 15px 40px;
            font-size: 1rem;
        }

        /* Form Styling */
        .form-control {
            border-radius: 15px;
            border: 2px solid var(--border-color);
            padding: 15px 20px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--white);
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(139, 90, 60, 0.15);
            background: var(--white);
        }

        .form-label {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        /* Alert Styling */
        .alert {
            border-radius: 15px;
            border: none;
            padding: 1rem 1.5rem;
            font-weight: 500;
        }

        .alert-success {
            background: linear-gradient(45deg, var(--success-color), #20C997);
            color: var(--white);
        }

        .alert-info {
            background: linear-gradient(45deg, var(--info-color), #0DCAF0);
            color: var(--white);
        }

        .alert-warning {
            background: linear-gradient(45deg, var(--warning-color), #FFB84D);
            color: var(--text-dark);
        }

        .alert-danger {
            background: linear-gradient(45deg, var(--danger-color), #E74C3C);
            color: var(--white);
        }

        /* Footer */
        .footer {
            background: linear-gradient(135deg, var(--primary-color), var(--text-dark));
            color: var(--white);
            padding: 4rem 0 2rem;
            margin-top: 5rem;
        }

        .footer h5 {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--accent-color);
        }

        .footer a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            display: block;
            margin-bottom: 0.5rem;
        }

        .footer a:hover {
            color: var(--accent-color);
            transform: translateX(5px);
        }

        /* Badge Styling */
        .badge {
            border-radius: 20px;
            padding: 8px 16px;
            font-weight: 600;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge.bg-success {
            background: var(--success-color) !important;
        }

        .badge.bg-danger {
            background: var(--danger-color) !important;
        }

        .badge.bg-primary {
            background: var(--primary-color) !important;
        }

        /* Table Styling */
        .table {
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(139, 90, 60, 0.08);
            background: var(--white);
        }

        .table thead th {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--white);
            border: none;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 1.5rem 1rem;
        }

        .table tbody td {
            padding: 1.5rem 1rem;
            border-color: var(--border-color);
            vertical-align: middle;
        }

        /* Pagination */
        .pagination .page-link {
            border-radius: 15px;
            margin: 0 3px;
            border: 2px solid var(--border-color);
            color: var(--text-dark);
            padding: 0.75rem 1rem;
            font-weight: 600;
        }

        .pagination .page-item.active .page-link {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: var(--white);
        }

        .pagination .page-link:hover {
            background: var(--accent-color);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        /* Breadcrumb */
        .breadcrumb {
            background: transparent;
            padding: 1rem 0;
        }

        .breadcrumb-item a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        .breadcrumb-item.active {
            color: var(--text-light);
        }

        /* Section Headers */
        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .section-subtitle {
            color: var(--text-light);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--white);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Gradient Backgrounds */
        .bg-gradient-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }

        .bg-gradient-accent {
            background: linear-gradient(135deg, var(--accent-color), var(--white));
        }

        /* Hover Effects */
        .hover-bg-light:hover {
            background-color: var(--accent-color);
            border-radius: 15px;
        }

        /* Sticky Sidebar */
        .sticky-top {
            z-index: 1020;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            /* General Mobile Adjustments */
            body {
                font-size: 14px;
                line-height: 1.5;
            }
            
            .container {
                padding-left: 15px;
                padding-right: 15px;
            }
            
            /* Typography Adjustments */
            .navbar-brand {
                font-size: 1.4rem;
            }
            
            .navbar-brand img {
                height: 32px !important;
                margin-right: 8px !important;
            }
            
            .hero-title {
                font-size: 2.2rem;
                line-height: 1.2;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            h1 { font-size: 2rem; }
            h2 { font-size: 1.75rem; }
            h3 { font-size: 1.5rem; }
            h4 { font-size: 1.25rem; }
            h5 { font-size: 1.1rem; }
            h6 { font-size: 1rem; }
            
            /* Card and Image Adjustments */
            .card-img-top {
                height: 180px;
            }
            
            .card {
                margin-bottom: 1rem;
            }
            
            .card-body {
                padding: 1rem;
            }
            
            .card-header {
                padding: 0.75rem 1rem;
            }
            
            /* Button Adjustments */
            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
                min-height: 44px; /* Better touch target */
            }
            
            .btn-lg {
                padding: 12px 24px;
                font-size: 1rem;
                min-height: 48px;
            }
            
            /* Form Adjustments */
            .form-control {
                padding: 12px 16px;
                font-size: 16px; /* Prevents zoom on iOS */
                min-height: 44px; /* Better touch target */
            }
            
            .form-label {
                font-size: 0.9rem;
                margin-bottom: 0.4rem;
            }
            
            /* Navigation Improvements */
            .navbar {
                padding: 0.5rem 0;
            }
            
            .navbar-toggler {
                border: 2px solid rgba(255, 255, 255, 0.6);
                padding: 6px 10px;
                border-radius: 8px;
                transition: all 0.3s ease;
                min-height: 44px; /* Better touch target */
            }
            
            .navbar-toggler:hover {
                border-color: rgba(255, 255, 255, 0.9);
                background-color: rgba(255, 255, 255, 0.15);
            }
            
            .navbar-toggler:focus {
                box-shadow: 0 0 0 0.2rem rgba(255, 255, 255, 0.3);
            }
            
            .navbar-toggler-icon {
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='%238B5A3C' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
                width: 1.3em;
                height: 1.3em;
            }
            
            .navbar-collapse {
                background: rgba(139, 90, 60, 0.98);
                border-radius: 12px;
                margin-top: 8px;
                padding: 12px;
                backdrop-filter: blur(15px);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            }
            
            .navbar-nav .nav-link {
                padding: 14px 16px;
                margin: 3px 0;
                border-radius: 10px;
                transition: all 0.3s ease;
                font-weight: 500;
                color: white !important;
                min-height: 44px; /* Better touch target */
                display: flex;
                align-items: center;
            }
            
            .navbar-nav .nav-link:hover {
                background-color: rgba(255, 255, 255, 0.15);
                transform: translateX(3px);
                color: white !important;
            }
            
            .navbar-nav .nav-link.active {
                background-color: rgba(255, 255, 255, 0.2);
                color: white !important;
            }
            
            .dropdown-menu {
                background: rgba(255, 255, 255, 0.98);
                border: none;
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                margin-top: 5px;
                padding: 8px;
            }
            
            .dropdown-item {
                padding: 12px 16px;
                border-radius: 8px;
                margin: 2px 0;
                transition: all 0.3s ease;
                font-size: 0.9rem;
                min-height: 44px; /* Better touch target */
                display: flex;
                align-items: center;
            }
            
            .dropdown-item:hover {
                background-color: var(--primary-color);
                color: white;
                transform: translateX(3px);
            }
            
            /* Cart Badge Adjustments */
            .cart-badge {
                top: -6px;
                right: -6px;
                padding: 3px 6px;
                font-size: 0.7rem;
            }
            
            /* Table Adjustments */
            .table {
                font-size: 0.9rem;
            }
            
            .table thead th {
                padding: 0.75rem 0.5rem;
                font-size: 0.85rem;
            }
            
            .table tbody td {
                padding: 0.75rem 0.5rem;
            }
            
            /* Alert Adjustments */
            .alert {
                padding: 0.75rem 1rem;
                font-size: 0.9rem;
            }
            
            /* Footer Adjustments */
            .footer {
                padding: 2rem 0 1rem;
                margin-top: 3rem;
            }
            
            .footer h5 {
                font-size: 1.1rem;
                margin-bottom: 1rem;
            }
            
            .footer .row > div {
                margin-bottom: 1.5rem;
            }
            
            .footer p {
                font-size: 0.9rem;
                line-height: 1.5;
            }
            
            .footer a {
                font-size: 0.9rem;
                padding: 0.25rem 0;
            }
            
            /* Utility Classes */
            .d-none-mobile {
                display: none !important;
            }
            
            .d-block-mobile {
                display: block !important;
            }
            
            /* Spacing Adjustments */
            .mt-5 { margin-top: 2rem !important; }
            .mb-5 { margin-bottom: 2rem !important; }
            .py-5 { padding-top: 2rem !important; padding-bottom: 2rem !important; }
            
            /* Product Grid Adjustments */
            .row > [class*="col-"] {
                margin-bottom: 1rem;
            }
            
            /* Search and Filter Adjustments */
            .search-form {
                margin-bottom: 1rem;
            }
            
            .filter-buttons {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            .filter-buttons .btn {
                font-size: 0.8rem;
                padding: 6px 12px;
            }
            
            /* Hero Section Mobile Optimization */
            .hero-section {
                padding: 2rem 0;
                margin-bottom: 2rem;
            }
            
            .hero-section .bg-gradient-accent {
                width: 200px !important;
                height: 200px !important;
                padding: 3rem !important;
            }
            
            .hero-section .fa-5x {
                font-size: 3rem !important;
            }
            
            /* Sidebar Mobile Optimization */
            .sticky-top {
                position: relative !important;
                top: 0 !important;
                margin-bottom: 1rem;
            }
            
                    /* Payment Options Mobile */
        .payment-option {
            margin-bottom: 1rem;
        }
        
        .payment-label {
            padding: 1rem;
            min-height: 80px;
            cursor: pointer;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            background: var(--white);
        }
        
        .payment-label:hover {
            border-color: var(--primary-color);
            background: var(--accent-color);
        }
        
        .payment-radio:checked + .payment-label {
            border-color: var(--primary-color);
            background: var(--accent-color);
            box-shadow: 0 4px 15px rgba(139, 90, 60, 0.15);
        }
        
        .payment-icon {
            margin-right: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: var(--light-bg);
            border-radius: 10px;
        }
        
        .payment-info {
            flex: 1;
        }
        
        .payment-info h6 {
            margin-bottom: 0.25rem;
            font-weight: 600;
        }
        
        .payment-info small {
            color: var(--text-light);
            font-size: 0.8rem;
        }
        
        /* Hide radio buttons but keep them accessible */
        .payment-radio {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }
            
            /* Order Summary Mobile */
            .order-summary {
                margin-top: 1rem;
            }
            
            /* Mobile-specific enhancements */
            .mobile-full-width {
                width: 100% !important;
            }
            
            .mobile-stack {
                flex-direction: column !important;
            }
            
            .mobile-center {
                text-align: center !important;
            }
            
            /* Touch-friendly spacing */
            .touch-spacing > * {
                margin-bottom: 0.75rem;
            }
            
            .touch-spacing > *:last-child {
                margin-bottom: 0;
            }
        }
        
        /* Extra Small Devices */
        @media (max-width: 576px) {
            .navbar-brand {
                font-size: 1.2rem;
            }
            
            .navbar-brand img {
                height: 28px !important;
                margin-right: 6px !important;
            }
            
            .hero-title {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .card-img-top {
                height: 160px;
            }
            
            .btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .container {
                padding-left: 10px;
                padding-right: 10px;
            }
            
            .navbar-collapse {
                margin-top: 5px;
                padding: 10px;
            }
            
            .navbar-nav .nav-link {
                padding: 12px 14px;
                font-size: 0.9rem;
            }
            
            /* Extra small specific adjustments */
            .hero-section .bg-gradient-accent {
                width: 150px !important;
                height: 150px !important;
                padding: 2rem !important;
            }
            
            .hero-section .fa-5x {
                font-size: 2.5rem !important;
            }
            
            /* Table responsive for very small screens */
            .table-responsive {
                font-size: 0.8rem;
            }
            
            .table-responsive .btn {
                padding: 4px 8px;
                font-size: 0.75rem;
            }
            
            /* Form controls for very small screens */
            .form-control {
                font-size: 16px; /* Prevents zoom */
                padding: 10px 12px;
            }
            
            /* Payment options for very small screens */
            .payment-label {
                padding: 0.75rem;
                min-height: 70px;
            }
            
            .payment-icon {
                font-size: 1.5rem !important;
            }
            
            /* Cart items for very small screens */
            .cart-item-image {
                width: 50px !important;
                height: 50px !important;
            }
            
            /* Product cards for very small screens */
            .product-card .card-body {
                padding: 0.75rem;
            }
            
            .product-title {
                font-size: 1.1rem;
            }
            
            .product-price {
                font-size: 1.2rem;
            }
        }
        
        /* Landscape Mobile Optimization */
        @media (max-width: 768px) and (orientation: landscape) {
            .hero-section {
                padding: 1.5rem 0;
            }
            
            .hero-title {
                font-size: 1.8rem;
            }
            
            .navbar {
                padding: 0.25rem 0;
            }
            
            .card-img-top {
                height: 140px;
            }
        }
        
        /* High DPI Mobile Devices */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .card-img-top {
                image-rendering: -webkit-optimize-contrast;
                image-rendering: crisp-edges;
            }
        }
        
        /* Mobile Performance Optimizations */
        @media (max-width: 768px) {
            /* Reduce animations on mobile for better performance */
            .card:hover {
                transform: none;
                box-shadow: 0 8px 30px rgba(139, 90, 60, 0.08);
            }
            
            .btn:hover {
                transform: none;
            }
            
            .nav-link:hover {
                transform: none;
            }
            
            /* Optimize for mobile scrolling */
            .table-responsive {
                -webkit-overflow-scrolling: touch;
            }
            
            /* Better mobile form handling */
            input[type="email"],
            input[type="tel"],
            input[type="text"],
            input[type="number"],
            textarea {
                -webkit-appearance: none;
                border-radius: 15px;
            }
            
            /* Mobile-specific button states */
            .btn:active {
                transform: scale(0.98);
            }
            
            /* Mobile navigation improvements */
            .navbar-nav .nav-link:active {
                background-color: rgba(255, 255, 255, 0.25);
            }
            
            /* Enhanced touch targets */
            .btn-sm {
                min-height: 40px;
                padding: 8px 16px;
            }
            
            /* Better mobile spacing */
            .card-body {
                padding: 1.25rem;
            }
            
            /* Mobile-specific grid adjustments */
            .row-cols-1 > * {
                margin-bottom: 1rem;
            }
            
            /* Mobile payment options */
            .payment-option {
                margin-bottom: 0.75rem;
            }
            
            .payment-label {
                padding: 1.25rem;
                min-height: 90px;
            }
            
            /* Mobile cart improvements */
            .cart-item-image {
                width: 70px !important;
                height: 70px !important;
            }
            
            /* Mobile product cards */
            .product-card .card-body {
                padding: 1rem;
            }
            
            .product-card .btn {
                margin-top: 0.5rem;
            }
            
            /* Mobile form improvements */
            .form-group {
                margin-bottom: 1rem;
            }
            
            /* Mobile table improvements */
            .table td, .table th {
                padding: 0.75rem 0.5rem;
                font-size: 0.9rem;
            }
            
            /* Mobile badge improvements */
            .badge {
                font-size: 0.75rem;
                padding: 0.5rem 0.75rem;
            }
            
            /* Mobile icon improvements */
            .fa-2x {
                font-size: 1.5rem !important;
            }
            
            .fa-3x {
                font-size: 2rem !important;
            }
            
            .fa-5x {
                font-size: 3rem !important;
            }
            
            /* Mobile accessibility improvements */
            .btn:focus,
            .form-control:focus,
            .nav-link:focus {
                outline: 2px solid var(--primary-color);
                outline-offset: 2px;
            }
            
            /* Mobile loading states */
            .btn.loading {
                pointer-events: none;
                opacity: 0.7;
            }
            
            /* Mobile error states */
            .form-control.is-invalid {
                border-color: var(--danger-color);
                box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.15);
            }
            
            /* Mobile success states */
            .form-control.is-valid {
                border-color: var(--success-color);
                box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.15);
            }
            
            /* Mobile tooltip improvements */
            [title] {
                position: relative;
            }
            
            /* Mobile modal improvements */
            .modal-dialog {
                margin: 1rem;
            }
            
            .modal-content {
                border-radius: 15px;
            }
            
            /* Mobile dropdown improvements */
            .dropdown-menu {
                max-height: 300px;
                overflow-y: auto;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="{% url 'store:product_list' %}">
                <img src="{% static 'images/kitchencrae-logo.svg' %}" alt="KitchenCrate Logo" style="height: 40px; margin-right: 10px;">
            </a>
            {% if user.is_authenticated %}
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            {% endif %}
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <!-- Main Navigation -->
                <ul class="navbar-nav main-nav">
                    {% if user.is_authenticated and not admin_dashboard %}
                        <li class="nav-item">
                            <a class="nav-link nav-item-custom" href="{% url 'store:product_list' %}">
                                <i class="nav-icon fas fa-utensils"></i>
                                <span class="nav-text">Menu</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link nav-item-custom" href="{% url 'user:dashboard' %}">
                                <i class="nav-icon fas fa-tachometer-alt"></i>
                                <span class="nav-text">Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link nav-item-custom" href="{% url 'orders:payment_dashboard' %}">
                                <i class="nav-icon fas fa-credit-card"></i>
                                <span class="nav-text">Payments</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link nav-item-custom" href="{% url 'orders:order_list' %}">
                                <i class="nav-icon fas fa-list"></i>
                                <span class="nav-text">My Orders</span>
                            </a>
                        </li>
                    {% endif %}
                </ul>
                
                <ul class="navbar-nav">
                    {% if not admin_dashboard %}
                        {% if user.is_authenticated %}
                        <li class="nav-item position-relative">
                            <a class="nav-link" href="{% url 'cart:cart_detail' %}">
                                <i class="fas fa-shopping-cart"></i>
                                {% if cart|length > 0 %}
                                <span class="cart-badge">{{ cart|length }}</span>
                                {% endif %}
                            </a>
                        </li>
                        
                        <!-- Desktop Dropdown -->
                        <li class="nav-item dropdown d-none d-md-block">
                            <a class="nav-link dropdown-toggle" href="{% url 'user:profile' %}" role="button">
                                <i class="fas fa-user me-1"></i>{{ user.first_name|default:user.username }}
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="{% url 'user:profile' %}">
                                    <i class="fas fa-user-circle"></i> Profile
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{% url 'user:logout' %}">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </a></li>
                            </ul>
                        </li>
                        
                        <!-- Mobile Profile Button -->
                        <li class="nav-item d-md-none">
                            <a class="nav-link" href="{% url 'user:profile' %}">
                                <i class="fas fa-user me-1"></i>{{ user.first_name|default:user.username }}
                            </a>
                        </li>
                        
                        <!-- Mobile Logout Button -->
                        <li class="nav-item d-md-none">
                            <a class="nav-link" href="{% url 'user:logout' %}">
                                <i class="fas fa-sign-out-alt me-1"></i>Logout
                            </a>
                        </li>
                        {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'user:login' %}">Login</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn btn-outline-light" href="{% url 'user:signup' %}">Create</a>
                        </li>
                        {% endif %}
                    {% else %}
                        <!-- Admin logout link only -->
                        {% if user.is_authenticated %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'store:admin_dashboard' %}">
                                <i class="fas fa-tachometer-alt me-1"></i>Admin Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'store:admin_logout' %}">
                                <i class="fas fa-sign-out-alt me-1"></i>Admin Logout
                            </a>
                        </li>
                        {% endif %}
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Messages -->
    {% if messages %}
    <div class="container mt-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Main Content -->
    <main class="container my-4">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            {% block footer_content %}
            <div class="row">
                <div class="col-md-4">
                    <h5>About KitchenCrate</h5>
                    <p>Your favorite online kitchen for delicious meals, fast delivery, and great service.</p>
                </div>
                <div class="col-md-4">
                    {% if not admin_dashboard %}
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="{% url 'store:product_list' %}" class="text-decoration-none">Menu</a></li>
                        <li><a href="{% url 'cart:cart_detail' %}" class="text-decoration-none">Cart</a></li>
                        {% if user.is_authenticated %}
                        <li><a href="{% url 'orders:order_list' %}" class="text-decoration-none">My Orders</a></li>
                        {% endif %}
                    </ul>
                    {% endif %}
                </div>
                <div class="col-md-4">
                    <h5>Contact</h5>
                    <p><i class="fas fa-envelope me-2"></i>info@kitchencrate.com</p>
                    <p><i class="fas fa-phone me-2"></i>+234 810 787 0651</p>
                </div>
            </div>
            <hr>
            <div class="text-center">
                <p>&copy; 2025 KitchenCrate. All rights reserved.</p>
            </div>
            {% endblock %}
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Stripe JS -->
    <script src="https://js.stripe.com/v3/"></script>
    <!-- Mobile JS -->
    <script src="{% static 'js/mobile.js' %}"></script>
    <!-- Custom JS -->
    <script>
        // Mobile-specific enhancements
        document.addEventListener('DOMContentLoaded', function() {
            // Add touch feedback for mobile buttons
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(button => {
                button.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.98)';
                });
                
                button.addEventListener('touchend', function() {
                    this.style.transform = '';
                });
            });
            
            // Enhance payment option selection
            const paymentOptions = document.querySelectorAll('.payment-option');
            paymentOptions.forEach(option => {
                const label = option.querySelector('.payment-label');
                const radio = option.querySelector('.payment-radio');
                
                if (label && radio) {
                    label.addEventListener('click', function() {
                        radio.checked = true;
                        // Remove active class from all options
                        paymentOptions.forEach(opt => {
                            opt.classList.remove('active');
                        });
                        // Add active class to selected option
                        option.classList.add('active');
                    });
                }
            });
            
            // Enhanced mobile navigation improvements
            const navbarToggler = document.querySelector('.navbar-toggler');
            const navbarCollapse = document.querySelector('.navbar-collapse');
            
            if (navbarToggler && navbarCollapse) {
                // Close mobile menu when clicking outside
                document.addEventListener('click', function(e) {
                    if (!navbarToggler.contains(e.target) && !navbarCollapse.contains(e.target)) {
                        if (navbarCollapse.classList.contains('show')) {
                            navbarToggler.click();
                        }
                    }
                });
                
                // Close mobile menu when clicking on a link
                const navLinks = navbarCollapse.querySelectorAll('.nav-link');
                navLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        if (navbarCollapse.classList.contains('show')) {
                            navbarToggler.click();
                        }
                    });
                });
            }
            
            // Enhanced mobile dropdown improvements
            const dropdowns = document.querySelectorAll('.dropdown');
            dropdowns.forEach(dropdown => {
                const dropdownToggle = dropdown.querySelector('.dropdown-toggle');
                const dropdownMenu = dropdown.querySelector('.dropdown-menu');
                
                if (dropdownToggle && dropdownMenu) {
                    // Add touch feedback for dropdown items
                    const dropdownItems = dropdownMenu.querySelectorAll('.dropdown-item');
                    dropdownItems.forEach(item => {
                        item.addEventListener('touchstart', function() {
                            this.style.transform = 'scale(0.98)';
                        });
                        
                        item.addEventListener('touchend', function() {
                            this.style.transform = '';
                        });
                        
                        // Add haptic feedback for mobile
                        item.addEventListener('click', function() {
                            if (navigator.vibrate) {
                                navigator.vibrate(50);
                            }
                        });
                    });
                    
                    // Close dropdown when clicking outside
                    document.addEventListener('click', function(e) {
                        if (!dropdown.contains(e.target)) {
                            dropdownMenu.classList.remove('show');
                        }
                    });
                    
                    // Enhanced dropdown toggle behavior
                    dropdownToggle.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        // Close other dropdowns
                        dropdowns.forEach(otherDropdown => {
                            if (otherDropdown !== dropdown) {
                                otherDropdown.querySelector('.dropdown-menu').classList.remove('show');
                            }
                        });
                        
                        // Toggle current dropdown
                        dropdownMenu.classList.toggle('show');
                        
                        // Add haptic feedback
                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                }
            });
            
            // Prevent zoom on input focus (iOS)
            const inputs = document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], input[type="number"], textarea');
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    if (window.innerWidth <= 768) {
                        this.style.fontSize = '16px';
                    }
                });
            });
            
            // Smooth scrolling for mobile
            const smoothScrollLinks = document.querySelectorAll('a[href^="#"]');
            smoothScrollLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href !== '#') {
                        const target = document.querySelector(href);
                        if (target) {
                            e.preventDefault();
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    }
                });
            });
        });
        
        // Mobile performance optimizations
        if (window.innerWidth <= 768) {
            // Reduce motion for better performance
            document.documentElement.style.setProperty('--reduced-motion', 'reduce');
            
            // Optimize images for mobile
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                if (img.dataset.mobileSrc) {
                    img.src = img.dataset.mobileSrc;
                }
            });
        }
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html> 